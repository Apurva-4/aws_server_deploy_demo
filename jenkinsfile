pipeline {
  agent {
    kubernetes {
      namespace{
        stages{
          stage('test'){
            steps {
            withKubeConfig([
              credentialsId: 'my-kubernetes-credentials',
              namespace: 'default',
              podName: 'my-pod'
            ]) {
                 sh 'kubectl exec my-pod -- sh -c "echo 'Hello from the pod!'"'
            }
          }
        }
      }
    }
  }
}
}
