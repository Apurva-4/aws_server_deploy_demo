pipeline {
  agent any
  stages {
    stage('Clone repository') {
      steps {
        git 'https://github.com/Apurva-4/aws_server_deploy_demo.git'
      }
    }
    stage('Deploy to Kubernetes') {
      steps {
        sudo apt-get update
        sudo apt-get install -y kubectl
        pod_name = kubectl get pods -l app=apache -n frontend
        kubectl cp -r aws_server_deploy_demo/ ./pod_name:/usr/local/apache2/htdocs
        kubectl restart pod_name
      }
    }
  }
}
